<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPInspector.de – Deine IP & Sicherheitsinfos</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background-color: #f0f4f8;
      color: #1a1a1a;
    }
    header {
      background: linear-gradient(to right, #0077cc, #00aaff);
      color: white;
      padding: 1em;
      text-align: center;
      position: relative;
    }
    .logo-small {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 40px;
      height: auto;
    }
    .logo-animated {
      display: block;
      margin: 0 auto;
      height: 60px;
    }
    main {
      max-width: 900px;
      margin: 2em auto;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      margin-top: 0.5em;
    }
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1em;
    }
    .info-box {
      background: #e9f3fb;
      padding: 1em;
      border-radius: 6px;
      border: 1px solid #c6e2f5;
    }
    .language-switcher {
      text-align: center;
      margin-top: 1em;
    }
  </style>
</head>
<body>
  <header>
    <img src="animated-logo.gif" alt="Animated Logo" class="logo-animated">
    <h1>IPInspector.de</h1>
    <img src="logo.png" alt="Logo" class="logo-small">
  </header>

  <main>
    <div class="info-grid" id="infoGrid">
      <div class="info-box"><strong>IP-Adresse:</strong> <span id="ip"></span></div>
      <div class="info-box"><strong>IP-Version:</strong> <span id="version"></span></div>
      <div class="info-box"><strong>Hostname:</strong> <span id="hostname"></span></div>
      <div class="info-box"><strong>Provider:</strong> <span id="isp"></span></div>
      <div class="info-box"><strong>Land:</strong> <span id="country"></span></div>
      <div class="info-box"><strong>Stadt:</strong> <span id="city"></span></div>
      <div class="info-box"><strong>VPN / Proxy:</strong> <span id="vpn"></span></div>
      <div class="info-box"><strong>Zeitzone:</strong> <span id="timezone"></span></div>
      <div class="info-box"><strong>Verbindungstyp:</strong> <span id="connection"></span></div>
      <div class="info-box"><strong>Downlink:</strong> <span id="downlink"></span></div>
      <div class="info-box"><strong>Latenz:</strong> <span id="latency"></span></div>
      <div class="info-box"><strong>Sprache:</strong> <span id="language"></span></div>
      <div class="info-box"><strong>Browser:</strong> <span id="browser"></span></div>
      <div class="info-box"><strong>Betriebssystem:</strong> <span id="os"></span></div>
      <div class="info-box"><strong>Sicherheitsstatus:</strong> <span id="security"></span></div>
      <div class="info-box"><strong>WebRTC IP:</strong> <span id="webrtc"></span></div>
      <div class="info-box"><strong>DNS Leak Hinweis:</strong> <span id="dns"></span></div>
    </div>

    <div class="language-switcher">
      <label for="langSelect">Sprache wechseln:</label>
      <select id="langSelect">
        <option value="de">Deutsch</option>
        <option value="en">English</option>
        <option value="ar">العربية</option>
        <option value="fr">Français</option>
        <option value="es">Español</option>
        <option value="tr">Türkçe</option>
        <option value="ru">Русский</option>
        <option value="zh">中文</option>
        <option value="it">Italiano</option>
        <option value="pt">Português</option>
        <option value="ja">日本語</option>
        <option value="ko">한국어</option>
        <option value="hi">हिन्दी</option>
        <option value="pl">Polski</option>
        <option value="nl">Nederlands</option>
      </select>
    </div>
  </main>

  <script>
    async function fetchIPInfo() {
      try {
        const res = await fetch('https://ipapi.co/json/');
        const data = await res.json();
        document.getElementById('ip').textContent = data.ip;
        document.getElementById('version').textContent = data.version || (data.ip.includes(':') ? 'IPv6' : 'IPv4');
        document.getElementById('hostname').textContent = data.org;
        document.getElementById('isp').textContent = data.org;
        document.getElementById('country').textContent = data.country_name;
        document.getElementById('city').textContent = data.city;
        document.getElementById('timezone').textContent = data.timezone;
        document.getElementById('language').textContent = navigator.language;
        document.getElementById('os').textContent = navigator.platform;
        document.getElementById('browser').textContent = navigator.userAgent;
        document.getElementById('vpn').textContent = data.security && data.security.vpn ? 'Ja' : 'Nein';
        document.getElementById('security').textContent = data.security && (data.security.proxy || data.security.tor) ? 'Verdächtig' : 'Sicher';
      } catch (err) {
        console.error(err);
      }
    }

    function fetchConnectionInfo() {
      const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      if (conn) {
        document.getElementById('connection').textContent = conn.type || 'Unbekannt';
        document.getElementById('downlink').textContent = conn.downlink ? conn.downlink + ' Mbps' : 'N/A';
        document.getElementById('latency').textContent = conn.rtt ? conn.rtt + ' ms' : 'N/A';
      }
    }

    function getWebRTCIP() {
      let ip;
      const pc = new RTCPeerConnection({iceServers:[]});
      pc.createDataChannel('');
      pc.createOffer().then(offer => pc.setLocalDescription(offer));
      pc.onicecandidate = event => {
        if (event && event.candidate && event.candidate.candidate) {
          const candidate = event.candidate.candidate;
          const match = candidate.match(/([0-9]{1,3}(\.[0-9]{1,3}){3})/);
          ip = match ? match[1] : 'Nicht erkannt';
          document.getElementById('webrtc').textContent = ip;
          pc.close();
        }
      };
    }

    document.getElementById('langSelect').addEventListener('change', (e) => {
      const selectedLang = e.target.value;
      window.location.href = `?lang=${selectedLang}`; // Dummy redirect simulation
    });

    fetchIPInfo();
    fetchConnectionInfo();
    getWebRTCIP();
    document.getElementById('dns').textContent = 'Kein Leak erkannt'; // Dummy-Status
  </script>
</body>
</html>
